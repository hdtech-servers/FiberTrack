{% extends 'base.html' %}

{% block content %}
        {% include 'hr/hr_navbar.html' %}

<div>
    <h1>
        Departments
    <!-- Add Department Button to trigger modal -->
    <button style="padding: 0.5rem; border-radius: 50%;" type="button" class="btn btn-success mb-3" data-toggle="modal" data-target="#addDepartmentModal" >
        <i class="fas fa-plus"></i>
    </button>
    </h1>


    <!-- Departments Table -->
    <table class="table table-hover table-striped">
        <thead class="thead-green">
            <tr>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
            {% for department in departments %}
            <tr>
                <td>{{ department.name }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination -->
    <div class="pagination">
        {% if departments.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ departments.previous_page_number }}">previous</a>
        {% endif %}

        <span>Page {{ departments.number }} of {{ departments.paginator.num_pages }}</span>

        {% if departments.has_next %}
            <a href="?page={{ departments.next_page_number }}">next</a>
            <a href="?page={{ departments.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </div>
</div>

<!-- Add Department Modal -->
<div class="modal fade" id="addDepartmentModal" tabindex="-1" aria-labelledby="addDepartmentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="addDepartmentModalLabel">Add Department</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form method="post" action="{% url 'department_add' %}">
                {% csrf_token %}
                <div class="modal-body">
                    {{ form.as_p }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-success">Save Department</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
